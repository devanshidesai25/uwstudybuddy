{"ast":null,"code":"import React,{useState,useEffect}from'react';import{getDatabase,ref,get}from'firebase/database';import{Link}from'react-router-dom';import Header from'./Header';import Footer from'./Footer';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Shop(){const[listings,setListings]=useState([]);const[selectedSupplyType,setType]=useState('All');const filterListings=listings=>{return listings.filter(listing=>{if(selectedSupplyType!=='All'&&listing.supplyType!==selectedSupplyType){return false;}return true;});};useEffect(()=>{const fetchData=async()=>{const database=getDatabase();const snapshot=await get(ref(database,'supplyListings'));const data=[];if(snapshot.exists()){snapshot.forEach(childSnapshot=>{data.push({id:childSnapshot.key,...childSnapshot.val()});});}setListings(data);};fetchData();},[]);const handleDropdownChange=event=>{setType(event.target.value);};const filteredListings=filterListings(listings);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"section\",{id:\"All-Listings\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"View Available Listings\"}),/*#__PURE__*/_jsxs(\"section\",{id:\"Filter\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",children:\"Filter by Category:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"category\",onChange:handleDropdownChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"All\",children:\"All\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Textbook\",children:\"Textbooks\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Notes\",children:\"Notes\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Supplies\",children:\"School Supplies\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Miscellaneous\",children:\"Miscellaneous\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"listings-container\",children:/*#__PURE__*/_jsx(\"section\",{className:\"textbook-listings\",children:filteredListings.map(listing=>/*#__PURE__*/_jsxs(\"div\",{className:\"textbook-item-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:listing.image,alt:\"\".concat(listing.name)}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"h3\",{children:listing.name})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"h6\",{children:[\"$\",listing.price]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"more-details-wrapper\",children:/*#__PURE__*/_jsx(Link,{to:\"/listing/\".concat(listing.id),children:/*#__PURE__*/_jsx(\"button\",{children:\"View Full Listing\"})})})]},listing.id))})})]}),/*#__PURE__*/_jsx(Footer,{})]});}export default Shop;","map":{"version":3,"names":["React","useState","useEffect","getDatabase","ref","get","Link","Header","Footer","jsx","_jsx","jsxs","_jsxs","Shop","listings","setListings","selectedSupplyType","setType","filterListings","filter","listing","supplyType","fetchData","database","snapshot","data","exists","forEach","childSnapshot","push","id","key","val","handleDropdownChange","event","target","value","filteredListings","children","htmlFor","onChange","className","map","src","image","alt","concat","name","price","to"],"sources":["/Users/devanshidesai/Desktop/INFO340/studdybuddyuw/src/Shop.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getDatabase, ref, get } from 'firebase/database';\nimport { Link } from 'react-router-dom';\nimport Header from './Header';\nimport Footer from './Footer';\n\nfunction Shop() {\n  const [listings, setListings] = useState([]);\n  const [selectedSupplyType, setType] = useState('All');\n\n  const filterListings = (listings) => {\n    return listings.filter((listing) => {\n      if (selectedSupplyType !== 'All' && listing.supplyType !== selectedSupplyType) {\n        return false;\n      }\n      return true;\n    });\n  };\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const database = getDatabase();\n      const snapshot = await get(ref(database, 'supplyListings'));\n      const data = [];\n\n      if (snapshot.exists()) {\n        snapshot.forEach((childSnapshot) => {\n          data.push({ id: childSnapshot.key, ...childSnapshot.val() });\n        });\n      }\n      setListings(data);\n    };\n\n    fetchData();\n  }, []);\n\n  const handleDropdownChange = (event) => {\n    setType(event.target.value);\n  };\n\n  const filteredListings = filterListings(listings);\n\n  return (\n    <div>\n      <Header />\n      <section id=\"All-Listings\">\n        <h2>View Available Listings</h2>\n        <section id=\"Filter\">\n          <label htmlFor=\"category\">Filter by Category:</label>\n          <select id=\"category\" onChange={handleDropdownChange}>\n            <option value=\"All\">All</option>\n            <option value=\"Textbook\">Textbooks</option>\n            <option value=\"Notes\">Notes</option>\n            <option value=\"Supplies\">School Supplies</option>\n            <option value=\"Miscellaneous\">Miscellaneous</option>\n          </select>\n        </section>\n        <div className=\"listings-container\">\n          <section className=\"textbook-listings\">\n            {filteredListings.map((listing) => (\n              <div key={listing.id} className=\"textbook-item-container\">\n                <img src={listing.image} alt={`${listing.name}`} />\n                <ul>\n                  <li><h3>{listing.name}</h3></li>\n                  <li><h6>${listing.price}</h6></li>\n                </ul>\n                <div className=\"more-details-wrapper\">\n                  <Link to={`/listing/${listing.id}`}>\n                    <button>\n                      View Full Listing\n                    </button>\n                  </Link>\n                </div>\n              </div>\n            ))}\n          </section>\n        </div>\n      </section>\n      <Footer />\n    </div>\n  );\n}\n\nexport default Shop;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}